@echo off
SET LC_ALL=en_US
VER | FINDSTR /IL "5." > NUL
IF %ERRORLEVEL% EQU 0 goto Start
VER | FINDSTR /IL "6.0" > NUL
IF %ERRORLEVEL% EQU 0 goto Start
CHCP 65001
:Start
REM *************************************************************************************** 
REM *** This file is provided as-is.  Modifications to this file are at your own risk.  *** 
REM *** The End User License Agreement was accepted during the creation of this script  *** 
REM *** by the user: rfuser                                                          
REM *************************************************************************************** 
REM Generated by MIP v6.0-010
SET PROMPT_TARG=F
SET "MIPPATH=c:\modelsim-win32-2020.3-pe\modelsim-win32-2020.3-pe.exe"
VER | FINDSTR /IL "6." > NUL
IF %ERRORLEVEL% NEQ 0 SET "MIPPATH=c:\modelsim-win32-2020.3-pe\modelsim-win32-2020.3-pe.exe"
SET MG_INSTALL_PID=%COMPUTERNAME%-%Time::=.%%RANDOM%
SET MG_INSTALL_PID=%MG_INSTALL_PID:,=.%
SET NEWTARG=
SET NEWSRC=
SET NEWMIPLOC=
SET NEWDOCLOC=
SET MIP_PATH_ERRORS=0
SET Self=%~f0
SET TEMP=%TEMP:/=\%
SET MIPBATCMD=-batch "%Self%"
SET MIPSKIP=
SET MIPEXTRAARGS=
SET MIPTARG="C:\modelsim"
SET MIPSRC="C:\modelsim-win32-2020.3-pe\modelsim-win32-2020.3-pe.exe"
PUSHD "%~dp0"
:LOOP
IF [%1]==[] GOTO DoneArgs
IF /I [%1]==[-tgt] GOTO TARG
IF /I [%1]==[-src] GOTO SRC
IF /I [%1]==[-msiloc] GOTO MSILOC
IF /I [%1]==[-accesspath] GOTO DOCLOC
IF /I [%1]==[-batchremove] GOTO REMOVEVERIFY
IF /I [%1]==[-batchverify] GOTO REMOVEVERIFY
IF /I [%1]==[-repair] GOTO EXTRAARGS
IF /I [%1]==[-nojw] GOTO EXTRAARGS
IF /I [%1]==[-deleteUserModifiedFiles] GOTO EXTRAARGS
IF /I [%1]==[-batchall] GOTO OTHERBATCH
IF /I [%1]==[-batchlicensed] GOTO OTHERBATCH
IF /I [%1]==[-batchupdate] GOTO OTHERBATCH
echo "USAGE: %~nx0 [-tgt <target>] [-src <source>] [-msiloc <path>] [-batchremove] [-repair]"
GOTO :EOF
:TARG
SHIFT
SET NEWTARG=-tgt "%~1"
SET PROMPT_TARG=F
GOTO NEXT
:SRC
SHIFT
SET NEWSRC=-src "%~1"
GOTO NEXT
:MSILOC
SHIFT
SET NEWMIPLOC=-msiloc "%~1"
GOTO NEXT
:DOCLOC
SHIFT
SET NEWDOCLOC=-accesspath "%~1"
GOTO NEXT
:REMOVEVERIFY
SET MIPBATCMD=%1 "%Self%"
SET MIPSKIP=T
GOTO NEXT
:EXTRAARGS
SET EXTRAARGS=%EXTRAARGS% %1
GOTO NEXT
:OTHERBATCH
SET MIPBATCMD=%1 -tgt "%MIPTARG%" -src "%MIPSRC%"
GOTO NEXT
:NEXT
SHIFT
GOTO LOOP
:DoneArgs
FOR %%A IN ("%MIPPATH%") DO SET MIPFILE=%%~nxA
DIR /A-D /B "%MIPPATH%" 2>NUL | FINDSTR /I /X /C:"%MIPFILE%" >NUL 2>&1
IF ERRORLEVEL 1 echo MIPPATH of "%MIPPATH%" must exist and not be a directory.
IF NOT ERRORLEVEL 1 GOTO CheckTarg
SET /A MIP_PATH_ERRORS+=1
IF NOT %MIP_PATH_ERRORS% lss 10 GOTO :EOF
SET /P MIPPATH=Enter path to SETUP.EXE (or 'x' to quit): 
IF [%MIPPATH%]==[x] GOTO :EOF
GOTO DoneArgs
:CheckTarg
IF NOT ["%PROMPT_TARG%"]==["T"] GOTO MakeTarg
SET /P ENTERED_TARG=Enter a Target Directory: 
SET NEWTARG=-tgt "%ENTERED_TARG%"
:MakeTarg
SET ansfile="%TEMP%.\~ans.tmp"
echo d> %ansfile%
echo yes>> %ansfile%
SET ansfile=-%ansfile:~-8,-1%
IF ["%MIPSKIP%"]==["T"] GOTO MIPINSTALL
REM *** ADD YOUR OWN PRE INSTALL COMMANDS BELOW HERE ***


REM *** ADD YOUR OWN PRE INSTALL COMMANDS ABOVE HERE ***
:MIPINSTALL
START "" /WAIT "%MIPPATH%" -noexecute %NEWMIPLOC%
IF NOT ["%ProgramFiles(x86)%"]==[""] FOR /f "skip=2 tokens=2,*"  %%a IN ('%WINDIR%\SysWOW64\REG QUERY HKLM\SOFTWARE\MentorGraphics\MentorGraphicsJI /v InstPath') DO SET INST_PATH=%%~b
IF ["%ProgramFiles(x86)%"]==[""] FOR /f "skip=2 tokens=2,*"  %%a IN ('REG QUERY HKLM\SOFTWARE\MentorGraphics\MentorGraphicsJI /v InstPath') DO SET INST_PATH=%%~b
IF ["%MIPSKIP%"]==["T"] GOTO RUNMIP
REM
REM
REM
REM
:RUNMIP
"%INST_PATH%\Install.exe" %MIPBATCMD% %NEWTARG% %NEWSRC% %NEWDOCLOC% %EXTRAARGS% %ansfile%
SET INSTALLEXIT=%ERRORLEVEL%
IF ["%MIPSKIP%"]==["T"] GOTO COPYLOG
REM
REM
:COPYLOG
REM
copy "%INST_PATH%\LOGS\%MG_INSTALL_PID%mip_history.txt" "C:\modelsim-win32-2020.3-pe"
IF ["%MIPSKIP%"]==["T"] GOTO MIPEXIT
REM *** ADD YOUR OWN POST INSTALL COMMANDS BELOW HERE ***


REM *** ADD YOUR OWN POST INSTALL COMMANDS ABOVE HERE ***
:MIPEXIT
POPD
IF %INSTALLEXIT% NEQ 0 EXIT /B %INSTALLEXIT%
GOTO :EOF 

REM ##### BELOW HERE IS XML DATA #####

<batchFile>
	<source value="C:\modelsim-win32-2020.3-pe\modelsim-win32-2020.3-pe.exe"/>
	<target value="C:\modelsim"/>
	<installType value="all"/>
	<platform value="Windows 64-bit"/>
	<release name="ModelSim PE 2020.3">
		<product name="ModelSim PE" productroot=""/>
	</release>
</batchFile>
